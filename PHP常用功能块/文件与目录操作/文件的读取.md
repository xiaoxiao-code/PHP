# 文件的读取

在文件使用`fopen()`打开后（通常使用`'r'`或`'r+'`等区别模式），就可以使用一系列函数来读取其内容。

# 1 读取任意长度( `fread`)
- 函数： `fread()`
- 格式： 
```php
字符串变量 = fread(文件句柄, $length);
```
- 功能：从文件句柄指针的当前位置开始，读取最多`$length`多个字节的数据。
`feof()`函数 在循环中读取文件时，需要一个方法来判断是否已到达文件。
- 函数： `feof()`
- 格式：
```php
feof(文件句柄);
```
- 功能：检查文件指针是否已经到达文件（End Of File）。如果到达，返回`true`，否则返回`false` 。
循环读取文件此示例演示了如何使用`while`循环、`feof()`和`fread()`读取整个文件的内容。
```php
<?php
$handle = fopen("EX8-9.php", "r"); // 打开文件
$content = "";

// 循环，直到 feof() 返回 true
while (!feof($handle)) {
    // 每次读取 8192 字节
    $content .= fread($handle, 8192);
}

fclose($handle); // 关闭文件
echo htmlspecialchars($content); // 显示内容
?>
```
# 2 读取一行 ( `fgets`)
- 函数： `fgets()`
- 格式： 
```php
字符串变量 = fgets(文件句柄);
```
- 功能：从文件句柄光标的当前位置读取一行文本，并返回该行字符串。
逐行读取文件此示例演示了如何使用`feof()`和`fgets()`来逐行读取文件。
```php
<?php
$handle = fopen("EX8-9.php", "r");

while (!feof($handle)) {
    // 每次读取一行
    $data = fgets($handle);
    echo htmlspecialchars($data) . "<br>";
}

fclose($handle);
?>
```
# 3 读取整个文件到内存 ( `file`)
- 函数： `file()`
- 格式： 
```php
数组名 = file("文件路径");
```
- 功能：将整个文件的内容读取到一个数据库中，文件中的每一行都会成为数据库中的一个元素。
使用`file`函数 此示例演示了如何使用`file()`和`foreach`循环来显示文件内容。
```php
<?php
// 1. 将文件 EX8-9.php 的所有行读入数组 $line
$line = file("EX8-9.php");

// 2. 遍历数组
foreach ($line as $line_num => $line_content) {
    echo htmlspecialchars($line_content) . "<br>";
}
?>
```
# 4 读取整个文件到字符串 ( `file_get_contents`)
- 函数： `file_get_contents()`
- 格式： 
```php
字符串变量 = file_get_contents("文件路径");
```
- 功能：将整个文件的内容读取到一个字符串变量中。这比使用`fopen/fread/fclose`循环要简单。
使用`file_get_contents`函数
```php
<?php
$content = file_get_contents("EX8-9.php");
echo htmlspecialchars($content);
?>
```
# 5 读取文件并直接输出( `readfile`)
- 函数： `readfile()`
- 格式： 
```php
readfile("文件路径");
```
- 功能：将整个文件的内容读取，并直接输出到浏览器（输出平面图）。